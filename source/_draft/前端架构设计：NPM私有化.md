---
title: 前端架构设计：NPM私有化
category: 前端
tags:
 - webpack
 - npm
abbrlink: 37788
date: 2018-07-23 12:01:15
---

借助 NPM 私有化复用 webpack 配置、精简开发目录结构、对工具类代码进行版本管理和复用。

<!-- more -->

---

> 本文章基于以下CC协议进行知识共享：署名（BY）-非商业性使用（NC）-禁止演绎（ND）

---

# 实际需求

为什么需要 NPM 私有化？都说脱离业务场景谈解决方案是耍流氓，那么就先简单说一下没有 NPM 私有化中遇到的问题：

1. 产品线增多后，为了降低重复工作量，前端部分基本上都是复用的同一套 webpack 编译策略。但是偶尔也会对编译策略进行维护、优化，至此就造成了不同项目间的配置差异。
2. 使用 Git 管理策略时，合并代码经常造成不必要的冲突。
3. 一些经常用到的工具方法，例如：加密解密、时间转换等，都是在架构分支中直接提交的，导致多个不同的架构设计需要复用一套工具代码时，同步不方便。

# 解决方案

## Cnpm & Sinopia & Verdaccio

sinopia 在15年的时候就停止更新了，继而由 verdaccio 提供更新升级，所以两者用法基本上都是一致的，以下都以 sinopia 为例说明。